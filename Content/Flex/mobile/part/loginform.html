<script cdscript="true" type="text/javascript">
    cd.flex.addTemplate(
        "loginform",
	   null,
       function (template, abstractPart) {
           //write custom stuff
           abstractPart.append();
       },
       function (abstractPart) {
           abstractPart.setupProperty(abstractPart.propertyKeys.login, '[cdid="loginform-username-input"]');
           abstractPart.setupProperty(abstractPart.propertyKeys.password, '[cdid="loginform-password-input"]');

           abstractPart.setupEvent(abstractPart.eventKeys.login, 'click [cdid="loginform-login-btn"]');
           abstractPart.setupEvent(abstractPart.eventKeys.facebooklogin, 'click [cdid="facebook-loginlinkbutton"]');            
           abstractPart.setupEvent(abstractPart.eventKeys.password, 'click [cdid="loginform-forgot-password-btn"]');
           abstractPart.setupEvent(abstractPart.eventKeys.updatecredentials, 'click [cdid="loginform-update-credentials-btn"]');
       }
	  );
</script>

<div class="partcontent partcontent-loginform" cdlegacy="false" cd-data-model="SubscriberLogin">
    <div>
        <div id="existing_users_login_message">
            <h1>Sign In</h1>
        </div>
        <div>
            <div>
                <label for="Username" cdresource="loginform_username_label">Username: </label>
                <input cdid="loginform-username-input" type="text" cd-data-prop="Login" cd-data-rule="required;pattern(email_pattern)" />
            </div>
            <div>
                <label for="Password" cdresource="loginform_password_label">Password: </label>
                <input cdid="loginform-password-input" type="password" cd-data-prop="Password" cd-data-rule="required;" maxlength="30" />
            </div>
            <div id="loginform-forgotpassword-btn">
                <a cdid="loginform-forgot-password-btn">
                    <span cdresource="loginform_forgot_password_btn">Forgot Password?</span>
                </a>
            </div>
            <div>
                <a cdid="loginform-login-btn" class="mainButton" href="#">
                    <span cdresource="login"></span>
                </a>
            </div>
            
            <!--<div>
                <a cdid="loginform-update-credentials-btn">
                    <span cdresource="loginform_update_credentials_btn">Update Credentials</span>
                </a>
            </div>-->
        </div>
        <div>
            <div id="facebook-loginlinkbutton-container" cdfacebook="true">
                <a cdid="facebook-loginlinkbutton" class="facebook-button" href="#">
                    <span cdresource="facebook_login_to_link_button"></span>
                </a>
            </div>
            <div id="continue_checkout_as_guest-container">
                <a cdid="continueCheckoutAsGuestButton" class="mainButton" href="#">
                    <span cdresource="continue_checkout_as_guest_button"></span>
                </a>
            </div>
        </div>
        <div>
            <div cdid="loginform-validation-summary" class="validation-summary validationsummary-loginform"></div>
        </div>
    </div>
</div>